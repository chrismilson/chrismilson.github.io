{"version":3,"sources":["ui/components/Wallpaper/common/Wallpaper.tsx","ui/components/Wallpaper/common/random.ts","ui/components/Wallpaper/common/PVector.ts","ui/components/Wallpaper/BouncyBalls/Ball.ts","ui/components/Wallpaper/BouncyBalls/index.tsx"],"names":["CanvasWallpaper","props","draw","className","pixelated","canvasRef","useDrawingCanvas","classNames","undefined","push","join","ref","OffscreenCanvasWallpaper","initDrawingModule","useOffscreenDrawingCanvas","randomInt","from","to","Math","floor","random","randomRange","PVector","x","y","this","action","extraVectors","componentWise","vectors","add","subtract","multiply","divisors","divide","a","b","c","d","e","f","transform","theta","rotate","sf","scale","modulus","map","v","components","reduce","s","sum","p","dividend","divisor","vector","cos","sin","sqrt","Ball","min","max","radius","hue","ctx","save","beginPath","arc","PI","closePath","fillStyle","fill","restore","hit","abs","frame","width","height","numBalls","balls","i","drawFrame","requestAnimationFrame","clearRect","forEach","ball","move","cancelAnimationFrame","BouncyBalls"],"mappings":"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","file":"static/js/4.2cf74ec3.chunk.js","sourcesContent":["import React from 'react'\nimport useDrawingCanvas, { DrawingMethod } from 'react-hooks-use-drawing-canvas'\nimport { useOffscreenDrawingCanvas } from 'react-hooks-use-offscreen-drawing-canvas'\nimport './Wallpaper.css'\n\nexport type CanvasDrawingMethod = DrawingMethod\n\nexport const CanvasWallpaper: React.FC<{\n  /** extra classes for css */\n  className: string\n  draw: CanvasDrawingMethod\n  /** Render the canvas pixelated; without interpolation. Default: false */\n  pixelated?: boolean\n}> = props => {\n  const { draw, className, pixelated = false } = props\n  const canvasRef = useDrawingCanvas(draw)\n  const classNames = ['Wallpaper', 'Canvas']\n\n  if (className !== undefined) {\n    classNames.push(className)\n  }\n  if (pixelated) {\n    classNames.push('pixelated')\n  }\n\n  return <canvas className={classNames.join(' ')} ref={canvasRef} />\n}\n\nexport const OffscreenCanvasWallpaper: React.FC<{\n  /** extra classes for css */\n  className: string\n  initDrawingModule: () => Promise<typeof import('worker-loader!*')>\n  /** Render the canvas pixelated; without interpolation. Default: false */\n  pixelated?: boolean\n}> = props => {\n  const { className, initDrawingModule, pixelated } = props\n  const canvasRef = useOffscreenDrawingCanvas(initDrawingModule)\n  const classNames = ['Wallpaper', 'Canvas', 'Offscreen']\n\n  if (className !== undefined) {\n    classNames.push(className)\n  }\n  if (pixelated) {\n    classNames.push('pixelated')\n  }\n\n  return <canvas className={classNames.join(' ')} ref={canvasRef} />\n}\n","/**\n * Returns a random integer between two numbers, or if there is only one number,\n * between zero and that number.\n *\n * @param from The lower bound\n * @param to The upper bound\n */\nexport const randomInt = (from: number, to: number = from) => {\n  if (from === to) from = 0\n  return from + Math.floor(Math.random() * (to - from))\n}\n\n/**\n * Returns a random float in a given range.\n */\nexport const randomRange = (from: number, to: number) => {\n  return from + Math.random() * (to - from)\n}\n\n/** Returns a random normally distributed float */\nexport const randomNormal = (mean = 0, stddev = 1) => {\n  let u = 0\n  let v = 0\n  while (u === 0) u = Math.random()\n  while (v === 0) v = Math.random()\n  const statistic = Math.sqrt(-2 * Math.log(u)) + Math.cos(2 * Math.PI * v)\n  return statistic * stddev + mean\n}\n","/**\n * A class that represents a position vector in two dimensional space.\n * @property x The x position\n * @property y The y position\n */\nexport default class PVector {\n  /** The x-position of the vector */\n  readonly x: number\n  /** The y-position of the vector */\n  readonly y: number\n\n  /**\n   * Makes a new PVector.\n   *\n   * @param x The x position\n   * @param y The y position (defaults to be the same as the x position)\n   */\n  constructor(x: number, y: number = x) {\n    this.x = x\n    this.y = y\n  }\n\n  /**\n   * Applies a given action to a list of vectors component-wise.\n   *\n   * For example, to add two vectors, `a` and `b`, componentwise, we could do\n   * ```ts\n   * PVector.componentWise((aComp, bComp) => aComp + bComp, a, b)\n   * ```\n   *\n   * @param action The action to be preformed on each component\n   * @param vectors The vectors whose components will be passed to the action\n   */\n  static componentWise(\n    action: (...components: number[]) => number,\n    ...vectors: PVector[]\n  ) {\n    return new PVector(\n      action(...vectors.map(v => v.x)),\n      action(...vectors.map(v => v.y))\n    )\n  }\n  /**\n   * The same as the static method, but the first vector will be the current\n   * `this`.\n   *\n   * @param action The action to perform on each component\n   * @param extraVectors Any extra vectors to be included in the calculation\n   */\n  componentWise(\n    action: (...components: number[]) => number,\n    ...extraVectors: PVector[]\n  ) {\n    return PVector.componentWise(action, this, ...extraVectors)\n  }\n\n  /**\n   * Adds a list of vectors together component-wise.\n   *\n   * @param vectors The vectors to add\n   */\n  static add(...vectors: PVector[]) {\n    return PVector.componentWise(\n      (...components) => components.reduce((s, v) => s + v, 0),\n      ...vectors\n    )\n  }\n  /**\n   * Adds a list of vectors to the vector component-wise.\n   *\n   * @param vectors The vectors to add\n   */\n  add(...vectors: PVector[]) {\n    return PVector.add(this, ...vectors)\n  }\n\n  /**\n   * Subtracts a list of vectors from a given vector.\n   *\n   * @param from The vector that will be subtracted from\n   * @param vectors The vectors to subtract\n   */\n  static subtract(from: PVector, ...vectors: PVector[]) {\n    return PVector.componentWise(\n      (from, sum) => from - sum,\n      from,\n      PVector.add(...vectors)\n    )\n  }\n  /**\n   * Subtracts a list of vectors from the vector.\n   *\n   * @param vectors The vectors to subtract\n   */\n  subtract(...vectors: PVector[]) {\n    return PVector.subtract(this, ...vectors)\n  }\n\n  /**\n   * Returns the component-wise multiplication of the vectors.\n   *\n   * @param vectors The vectors to multiply\n   */\n  static multiply(...vectors: PVector[]) {\n    return PVector.componentWise(\n      (...components) => components.reduce((p, v) => p * v, 1),\n      ...vectors\n    )\n  }\n  /**\n   * Multiplies the vector by a list of vectors.\n   *\n   * @param vectors The vectors to multiply by\n   */\n  multiply(...vectors: PVector[]) {\n    return PVector.multiply(this, ...vectors)\n  }\n\n  /**\n   * Divides a given vector by a list of other vectors component-wise.\n   *\n   * @param dividend The vector to be divided\n   * @param divisors The vectors to divide by\n   */\n  static divide(dividend: PVector, ...divisors: PVector[]) {\n    return PVector.componentWise(\n      (dividend, divisor) => dividend / divisor,\n      dividend,\n      PVector.multiply(...divisors)\n    )\n  }\n  /**\n   * Divides the vector by a list of other vectors component-wise.\n   *\n   * @param divisors The vectors to divide by\n   */\n  divide(...divisors: PVector[]) {\n    return PVector.divide(this, ...divisors)\n  }\n\n  /** Multiplies a vector by a matrix [a b, c d], and translates by e, f. */\n  static transform(\n    vector: PVector,\n    a: number,\n    b: number,\n    c: number,\n    d: number,\n    e = 0,\n    f = 0\n  ) {\n    return new PVector(\n      vector.x * a + vector.y * c + e,\n      vector.x * b + vector.y * d + f\n    )\n  }\n  /** Multiplies the vector by a matrix [a b, c d], and translates by e, f. */\n  transform(a: number, b: number, c: number, d: number, e = 0, f = 0) {\n    return PVector.transform(this, a, b, c, d, e, f)\n  }\n\n  /** Rotates a vector by an angle. (anticlockwise in radians) */\n  static rotate(vector: PVector, theta: number) {\n    const cos = Math.cos(theta)\n    const sin = Math.sin(theta)\n    return vector.transform(cos, -sin, sin, cos, 0, 0)\n  }\n  /** Rotates the vector by an angle. (anticlockwise in radians) */\n  rotate(theta: number) {\n    return PVector.rotate(this, theta)\n  }\n\n  /** Scales a vector by a factor. */\n  static scale(vector: PVector, sf: number) {\n    return PVector.componentWise(x => sf * x, vector)\n  }\n  /** Scales the vector by a factor. */\n  scale(sf: number) {\n    return PVector.scale(this, sf)\n  }\n\n  /** Gets the modulus of a vector */\n  static modulus(vector: PVector) {\n    return Math.sqrt(vector.x * vector.x + vector.y * vector.y)\n  }\n  /** Gets the modulus of a vector */\n  modulus() {\n    return PVector.modulus(this)\n  }\n\n  /**\n   * PVectors will be compared by their lengths.\n   */\n  valueOf() {\n    return this.modulus()\n  }\n}\n","import PVector from '../common/PVector'\nimport { randomRange, randomInt } from '../common/random'\n\nexport default class Ball {\n  /** The displacement of the ball */\n  private s: PVector\n  /** The velocity of the ball */\n  private v: PVector\n  /** The bottom left corner of the ball's bounding box */\n  private min: PVector\n  /** The top right corner of the ball's bounding box */\n  private max: PVector\n  /** The radius of the ball */\n  private radius: number\n  /** The hue of the ball */\n  private hue: number\n\n  constructor(\n    min: PVector,\n    max: PVector,\n    radius = Math.min(max.x - min.x, max.y - min.y, 20 + Math.random() * 20)\n  ) {\n    this.s = new PVector(\n      randomRange(min.x + radius, max.x - radius),\n      randomRange(min.y + radius, max.y - radius)\n    )\n    this.v = new PVector(1 + Math.random() * 3, 1 + Math.random() * 3).multiply(\n      new PVector(randomInt(2) || -1, randomInt(2) || -1)\n    )\n    this.radius = radius\n    this.min = min\n    this.max = max.add(min.multiply(new PVector(-1)))\n    this.hue = randomInt(360)\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    ctx.save()\n\n    ctx.beginPath()\n    ctx.arc(\n      this.min.x + this.s.x,\n      this.min.y + this.s.y,\n      this.radius,\n      0,\n      2 * Math.PI\n    )\n    ctx.closePath()\n\n    ctx.fillStyle = `hsla(${this.hue}, 100%, 40%, 0.6)`\n    ctx.fill()\n\n    ctx.restore()\n  }\n\n  move() {\n    const hit = PVector.componentWise(\n      (s, v, max) =>\n        Math.abs(Math.floor((s + v - this.radius) / (max - 2 * this.radius))),\n      this.s,\n      this.v,\n      this.max\n    )\n    if (hit.x | hit.y) this.hue = randomInt(360)\n\n    this.s = this.s\n      // apply velocity\n      .add(this.v)\n\n    this.v = this.v\n      // bounce off walls\n      .multiply(new PVector(1).subtract(hit.multiply(new PVector(2))))\n      // lose momentum on any wall hit\n      // .multiply(new PVector(1 - 0.1 * (hit.x + hit.y)))\n      // add gravity\n      .add(new PVector(0, 0.1 * (1 - hit.y)))\n  }\n}\n","import React from 'react'\nimport { CanvasWallpaper, CanvasDrawingMethod } from '../common/Wallpaper'\nimport PVector from '../common/PVector'\nimport Ball from './Ball'\n\nconst draw: CanvasDrawingMethod = (ctx, { width, height }) => {\n  const numBalls = (width * height) / 50000\n  const balls: Ball[] = []\n  for (let i = 0; i < numBalls; i++) {\n    balls.push(new Ball(new PVector(0, 0), new PVector(width, height)))\n  }\n  let frame: number\n\n  const drawFrame = () => {\n    frame = requestAnimationFrame(drawFrame)\n    ctx.clearRect(0, 0, width, height)\n\n    balls.forEach(ball => {\n      ball.draw(ctx)\n      ball.move()\n    })\n  }\n\n  drawFrame()\n  return () => {\n    cancelAnimationFrame(frame)\n  }\n}\n\nconst BouncyBalls: React.FC = () => (\n  <CanvasWallpaper className=\"BouncyBalls\" draw={draw} />\n)\n\nexport default BouncyBalls\n"],"sourceRoot":""}